"""This is a script to save riops .nc files from thredds server and read ice thickness.2019-02-14 Lam Hoi Ming"""#%% Import librariesimport urllibimport globimport osfrom tqdm import tqdmfrom netCDF4 import Dataset#%% Define functions and classesclass DownloadProgressBar(tqdm):    def update_to(self, b=1, bsize=1, tsize=None):        if tsize is not None:            self.total = tsize        self.update(b * bsize - self.n)def download_url(fileurl, output_path):    with DownloadProgressBar(unit='B', unit_scale=True,                             miniters=1, desc=fileurl.split('/')[-1]) as t:        urllib.request.urlretrieve(fileurl, filename=output_path, reporthook=t.update_to)#%%##        #%% Define start and end datesstartdate = input('What is the starting date (yyyymmdd)?')enddate = input('What is the end date (yyyymmdd)?') or ''#startyear = startdate[0,4]#startmonth = startdate[4,6]#startday = startdate[6,8]#%% Retrieve files from url path and save on local disksavedir = input('Where to save?') or "D:/Data/RIOPS/" fileurl = 'http://navigator.oceansdata.ca/thredds/fileServer/riops/daily/' + startdate + '_2D.nc'  #2D files contain ice and snow datatmp_filename = startdate + '_2D.nc'output_path = savedir + tmp_filenamefexist = os.path.isfile(output_path) # check if the file already existsif fexist:    print('This file already exists!')else:    download_url(fileurl, output_path)print('Select another file or date range')#%% Test reading ice thickness data from one filef = Dataset(output_path)print(f.dimensions.variables.keys())print(f.variables.keys())for key in f.variables.keys():    print(f.variables[key])    icevol = f['iicevol'][:]snowvol = f['isnowvol'][:]#%% Loop over downloaded dataset to get ice and snow thicknessfor file in glob.glob():    