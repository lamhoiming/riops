"""This is a script to save riops .nc files from thredds server and read ice thickness.2019-02-14 Lam Hoi Ming"""#%% Import librariesimport urllibimport globimport osimport h5pyimport netCDF4 as nc4import juliandate as jdfrom tqdm import tqdm#%% Define functions and classesclass DownloadProgressBar(tqdm):    def update_to(self, b=1, bsize=1, tsize=None):        if tsize is not None:            self.total = tsize        self.update(b * bsize - self.n)def download_url(fileurl, output_path):    with DownloadProgressBar(unit='B', unit_scale=True,                             miniters=1, desc=fileurl.split('/')[-1]) as t:        urllib.request.urlretrieve(fileurl, filename=output_path, reporthook=t.update_to)#%%##        #%% Define start and end datesstartdate = input('What is the starting date (yyyymmdd)?')enddate = input('What is the end date (yyyymmdd)?') or ''date = startdate#%% Converting to and from julian datewhich_year = jd.gd2jd(startdate)[0]day_count = jd.gd2jd(startdate)[1]#%% Retrieve files from url path and save on local disksavedir = input('Where to save?') or "D:/Data/RIOPS/" #%% Retrieve files from url path and save on local disksavedir = input('Where to save?') or "D:/Data/RIOPS/" fileurl = 'http://navigator.oceansdata.ca/thredds/fileServer/riops/daily/' + startdate + '_2D.nc'  #2D files contain ice and snow datatmp_filename = startdate + '_2D.nc'output_path = savedir + tmp_filenamefexist = os.path.isfile(output_path) # check if the file already existsif fexist:    print('This file already exists!')else:    download_url(fileurl, output_path)print('Select another file or date range')#%% Test reading ice thickness data from one filenc = nc4.Dataset(output_path,'r')print(nc.variables.keys()) # Display variable metadata with netCDF4for key in nc.variables.keys():    print(nc.variables[key])nc.close()    f = h5py.File(output_path,'r')icevol = f['iicevol'][:]snowvol = f['isnowvol'][:]#%% Loop over downloaded dataset to get ice and snow thicknessfor file in glob.glob():    